
<div class="parent" data-controller="random-delay" data-action="randomDelay#applyRandomDelays">
  <%# <div style="justify-content: center; display: flex"> %>
    <div class="text-container">
      <h1 class="title" data-controller="animate-text">PortfoliAl</h1>

        <div class="image-wrapper">
        <%= image_tag "PDP Beige.png", class: "image-only-shadow" %>
        </div>
      </div>


  <div class="grid-head" data-controller="random-delay">
    <% (1..50).each do |i| %>
      <div class="image-container">
        <%= image_tag "PDP Beige plat.png", id:"img_#{i}", class: "superpose", 'data-random-delay-target': 'image' %>
      </div>
    <% end %>
  </div>

  <div class="container pre-footer">
    <div>
      <h2 class="h2-text">Un bout de mon parcours, ma façon de voir le digital : "simple, utile, humain"</h2>
    </div>

    <div class="presentation-wrapper">
      <div class="grid-pres">
        <div class="text-block">
        <h2>Des outils pensés pour vos besoins, pas seulement pour briller dans les CV </h2>
          <br>
            Figma, Hubspot, WordPress, Webflow, Rails, Photoshop, After Effects... Ça fait beaucoup de noms, mais promis, ils servent tous à quelque chose.
          </br>
          <br> J’adapte les solutions aux besoins : site internet, acompagnement client, CRM ou dashboard. Mon but est de simplifier la complexité et rendre vos outils vraiment utiles pour chaque personne.
          </br>
          <%= link_to "Découvrir", projects_path, class: "discover-button-clair" %>
        </div>

    <div class="cards">
      <% @icons.each do |icon| %>
      <div class="card-category card-homepage"
          style="background-image: url(<%= asset_path("icons/#{icon.name}.png") %>)">
            <h3 class="icon-title"><%= icon.name.upcase %></h3>
      </div>
      <% end %>
    </div>

    <%# <%= image_tag "PDP Beige.png", class: "rotating", id: "rotating-image" %>
    </div>
  </div>

    <div class="section-fluid-main" data-controller="hover-text">
      <div class="section-row">
        <% @featured_projects.each do |project| %>
          <%= link_to project_path(project),
                      class: "section-col-link",
                      data: {
                        hover_text_target: "card",
                        customer: project.customer.to_s
                      } do %>
            <div class="section-col">
              <div class="section">
                <div class="section-in">
                  <%= image_tag project.logo, alt: project.customer, class: "project-logo" if project.logo.present? %>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>

        <!-- 6ᵉ carte : bouton découvrir -->
        <div class="section-col">
          <div class="section">
            <div class="section-in">
              <%= link_to "Découvrir", projects_path, class: "discover-button-clair" %>
            </div>
          </div>
        </div>
      </div>

      <!-- Texte de hover global + effet négatif -->
      <div class="hover-text">
        <h2 data-hover-text-target="title"></h2>
      </div>
    </div>

    <div class="presentation-wrapper">
      <div class="grid-pres">
        <div class="text-block">
        <h2>Mon approche pour faire avancer vos projets</h2>
          <br>
            Moi c’est Aline, passionnée par les projets digitaux qui allient sens et efficacité. Solution maker dans l’âme, je navigue entre marketing, design et tech pour transformer les idées en actions concrètes.
          </br>
          <br>
            J’avance avec curiosité, méthode et pragmatisme, sans chercher à faire « comme tout le monde », mais à proposer ce qui marche pour vous.
          </br>
          <%= link_to "Découvrir", about_path, class: "discover-button-clair" %>
        </div>

        <div>
          <%= image_tag "PDP Beige.png" %>
        </div>

      </div>
    </div>
  </div>
</div>





<script>
document.addEventListener("DOMContentLoaded", function () {
  const rotatingImage = document.getElementById("rotating-image");

  const observer = new IntersectionObserver(
    ([entry]) => {
      if (entry.isIntersecting) {
        rotatingImage.style.animationPlayState = "running";
      } else {
        rotatingImage.style.animationPlayState = "paused";
      }
    },
    {
      threshold: 0.1 // commence à animer si au moins 10% de l’image est visible
    }
  );

  if (rotatingImage) {
    observer.observe(rotatingImage);
  }
});

</script>
